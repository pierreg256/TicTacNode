
  	<% params.formAction = '/players'; %>
    <h3>
      New Player    </h3>
    <% if (params.errors) { %>
    <p>
      <div>Errors:</div>
      <% for (var p in params.errors) { %>
      <div><%=  p %>: <%= params.errors[p] %></div>
      <% } %>
    </p>
    <% } %>
    <%= partial('_form', {params: params}); %>
    
    <script type="text/javascript" src="/js/util/date.js"></script>
    <script type="text/javascript" src="/js/util/form.js"></script>
    <script type="text/javascript" src="/js/util/meta.js"></script>
    <script type="text/javascript" src="/js/util/string.js"></script>
    <script type="text/javascript" src="/js/util/url.js"></script>
    <script type="text/javascript" src="/js/models/model.js"></script>
    <script type="text/javascript" src="/js/models/player.js"></script>
    <script type="text/javascript">
      var displayErrors = function (err) {
        var str = '';
        for (var p in err) {
          str += p + ': ' + err[p] + '\\n';
        }
        alert(str);
      };

      var validateSubmit = function () {
        var form = document.getElementById('modelItemForm');
        var params = geddy.util.form.toObject(form);
        var item = Player.create(params);
        console.log(item);
        if (item.valid()) {
          form.submit();
        }
        else {
          displayErrors(item.errors);
        }
      };

    </script>    
    


